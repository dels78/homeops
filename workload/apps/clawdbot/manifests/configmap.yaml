---
apiVersion: v1
kind: ConfigMap
metadata:
  name: clawdbot-config
  namespace: automation
  labels:
    app.kubernetes.io/name: clawdbot
    app.kubernetes.io/instance: clawdbot
data:
  # OpenClaw bootstrap configuration
  # Minimal config to allow Control UI access
  # Further configuration via UI will be persisted to PVC
  openclaw.json: |
    {
      "gateway": {
        "mode": "local",
        "port": 18789,
        "bind": "lan",
        "trustedProxies": ["10.42.0.0/16"],
        "auth": {
          "mode": "token",
          "token": "${OPENCLAW_GATEWAY_TOKEN}"
        },
        "controlUi": {
          "enabled": true,
          "allowInsecureAuth": true
        }
      },
      "agents": {
        "defaults": {
          "workspace": "/home/node/openclaw"
        }
      },
      "channels": {
        "slack": {
          "enabled": true,
          "appToken": "${SLACK_APP_TOKEN}",
          "botToken": "${SLACK_BOT_TOKEN}",
          "dmPolicy": "open",
          "allowFrom": ["*"]
        }
      }
    }
